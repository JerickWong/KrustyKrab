<html lang="en"><head>
    <link rel="stylesheet" href="upload.css">
    <title>Krusty Krab</title>
</head>
<body>
    <div id="main">
        <nav>
            <p id="krustykrab">
                <img class="logo" src="view/krustykrablogo.png" alt="krustykrablogo"> <span id="name">Krusty Krab</span> 
            </p>
            <ul>
                <li><a href="homepage.html">Home</a></li>
                <li><a href="profile.html">Profile</a></li>
                <li><a href="#">Sales Data</a>
                    <ul>
                        <li><a href="customersserved.html">Customers Served</a></li>
                        <li><a href="grubpopularity.html">Grub Popularity</a></li>
                        <li><a href="perspecies.html">Grub Preference per Species</a></li>
                    </ul>
                </li>
                <li><a href="about.html">About Mr. Krabs</a></li>
                <li><a href="upload.html">Upload Data</a></li>
            </ul>
            
        </nav>
        <article class="content">
            <p><h1>Upload JSON File</h1></p>
            <p><img id='bodyimg' src="view/krustykrab.jpg" alt="krustykrab"></p>
            <p id="msg">Help us improve Krusty Krab</p>
            <div class="upload">
                <input id="contentFile" type="file" accept="application/json" />
            </div>
            <div>
                <button>Submit File</button>
            </div>
            
            <script>
                document.getElementById('contentFile').onchange = function(e) {
                try {
                    let files = e.target.files;
                    if (!files.length) {
                        alert('No file selected!');
                        return;
                    }
                    if (!files.JSON){
                        alert('Upload .json files only')
                        return;
                    }
                    else {
                        let file = files[0];
                        let reader = new FileReader();
                        const self = this;
                        reader.onload = (event) => {
                            console.log('FILE CONTENT', event.target.result);
                        };
                        reader.readAsText(file);
                    }
                    
                } catch (err) {
                    console.error(err);
                }
            }
            </script>
            
        </article>
    </div>
    

</body></html>